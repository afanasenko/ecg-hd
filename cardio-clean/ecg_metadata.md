**Описание метаданных, генерируемых при анализе кардиосигнала**

Функция *blobapi_detect_qrs*: обнаружение QRS-комплексов и сегментация отдельных волн.

qrs_metadata = blobapi_detect_qrs(inbuf, min_qrs_ms=20, delineate=False)

    Предварительные условия:
    blobapi_detect_qrs желательно вызывать после функций подавления
    дрейфа изолинии blobapi_fix_baseline и подавления сетевой помехи
    blobapi_mains_correction (порядок вызова не имеет значения)

    :param inbuf: входной буфер (остается неизменным)
    :param min_qrs_ms: минимальная длительность QRS-комплекса
    :param delineate: выполнить сегментацию найденных комплексов
    :return: qrs_metadata (список найденных комплексов)


Возвращает метаданные в виде списка словарей.

```
>>> qrs_metadata
[qrs0, qrs1, qrs2, ...]
```
Каждый словарь в списке содержит информацию по одному QRS-комплексу в виде пар "ключ-значение"

Описание полей в словаре метаданных:

```
>>> qrs0
{
    "cycle_num": порядковый номер кардиоцикла, начиная с 0
    "qrs_start": метка времени начала QRS
    "qrs_end": метка времени конца QRS
    "qrs_class_id": цифровой код класса или None, если не принадлежит ни одному классу
    "r_wave_center": метки времени вершин R-зубцов в каждом канале. В секундах от начала записи
    "r_wave_amplitude": Амплитуды R-зубца в каждом канале. Милливольт относительно изолинии
    "heartrate": Частота сердечных сокращений (ЧСС). уд/мин
    "artifact": Флаг наличия артефакта (True/False)
    "waves": {...} Параметры зубцов (словарь, см. далее)
    "qrsType" - тип (конфигурация) комплекса qrs - qR, Rs, qRs и т.д. None если артефакт
    "stt_params": {...} Параметры сегмента ST и зубца T (словарь, см. далее)
}
```

Примечания:

1. Временные метки qrs_start, qrs_end и r_wave_center - в секундах от начала записи, формат float32.
Временные метки отдельных зубцов q, r, s, p, t (start, end, center) - это номера отсчетов в сигнале.
2. Корректность значений *r_wave_amplitude* зависит от того, была ли предварительно
применена к сигналу коррекция дрейфа изолинии (*blobapi_fix_baseline*).
Это связано с тем, что функция *blobapi_detect_qrs* нечувствительна
к уровню изолинии и всегда вычисляет амплитуды зубцов относительно нулевого уровня.
3. ЧСС рассчитывается на основе положения вершин двух соседних R-зубцов.
4. Поле qrs_class_id отсутствует в метаданных, если не была выполнена классификация.



Параметры зубцов хранятся во вложенном словаре waves. Если зубец на обнаружен, все его параметры равны None.
```
"waves": {
    "p": {
        "start":
        "end":
        "center":
        "height":
    },
    "q": {
        "start":
        "end":
        "center":
        "height":
    },
    "r": {
        ...
    },
    "s": {
        ...
    },
    "j": {
        ...
    }
    "t": {
        ...
    }
}
```


Примечания:

1. Все временные метки в этом слваре являются номерами отсчетов сигнала, начиная с 0.
2. Начало и конец (start/end) в текущей реализации оцениваются только для зубца T.

Функция *blobapi_st_t_analysis*: Расчет параметров сегмента ST и зубца T на основе ранее сегментированного сигнала.

Предварительные условия:
1. Проведена коррекция дрейфа изолинии
2. Выполнена автоматическая или ручная сегментация характерных точек

Дополняет метаданные параметрами сегмента ST и зубца T. Для каждого кардиоцикла где есть валидные
координаты точки J и зубца T, в словарь metadata записывается поле *stt_params*

```
"stt_params" = {
        "st_start_offset": смещение начала ST от изолинии
        "st_end_offset": смещение конца ST от изолинии
        "st_slope": наклон ST
        "t_rising_slope": крутизна переднего фронта Т
        "t_falling_slope": крутизна заднего фронта Т
        "t_symmetry": симметричность Т (0 - идеальная симметрия)
        "t_sharpness": заостренность Т (чем больше, тем заостреннее)
        "t_amplitude": амплитуда зубца T.
}
```

Параметры, которые невозможно определить, записываются как None.
Если в поле "waves" отсутствуют необходимые данные, все элементы stt_params записываются как None.